# 幻影扑克游戏说明手册

## 目录
1. [游戏介绍](#游戏介绍)
2. [游戏规则](#游戏规则)
3. [游戏功能](#游戏功能)

## 游戏介绍
幻影扑克是一款多人在线扑克游戏，支持真人对战和机器人参与。游戏采用现代化的Web界面，提供流畅的游戏体验和实时互动功能。

## 游戏规则

### 基本规则
1. **游戏目标**
   - 尽快打完手中所有的牌
   - 按打完手牌的顺序决定名次
   - 最后剩牌的玩家为最后一名

2. **出牌规则**
   - 除了先手玩家，其他玩家按顺时针顺序回合，必须出牌、过牌或质疑
   - 出牌时需要声明牌的点数，数量系统自动计算。
   - 新轮可以出任意牌，不必与声明相符（可以说谎）
   - 单轮回合里声明的牌值必须与上家相同（除非开新轮）
   - 出牌时间限制为15秒，超时自动算过牌。

3. **质疑机制**
   - 玩家可以质疑上家的出牌声明
   - 质疑成功：被质疑者收回所有已出的牌（包括上家的出牌和牌堆里的牌）
   - 质疑失败：质疑者收回所有已出的牌（包括上家的出牌和牌堆里的牌）
   - 非收牌的一方获得下一轮出牌权，进入新轮

4. **过牌规则**
   - 玩家可以选择过牌
   - 所有人过牌后，最后出牌者可开新轮
   - 开新轮可以声明任意点数

### 特殊规则
1. **王牌规则**
   - 大王和小王可以替代任意牌值
   - 王牌在质疑时视为与声明相符
   - 每副牌包含2张王牌（大王和小王）

2. **胜利条件**
   - 打完手牌不代表立即胜利
   - 需要等到下列情况之一：
     * 无人质疑
     * 被质疑但质疑失败
     * 其他玩家出牌
   - 最终按打完手牌的顺序排名

3. **机器人规则**
   - 三种难度级别：简单、中等、困难
   - 难度影响出牌策略和反应时间：
     * 简单：反应慢，说谎概率高（70%）
     * 中等：反应适中，说谎概率中等（50%）
     * 困难：反应快，说谎概率低（30%）
   - 机器人不能成为房主
   - 机器人只在游戏中存在，不会出现在大厅

### 回合流程
1. **回合开始**
   - 系统随机发牌
   - 房主获得首轮出牌权

2. **玩家行动**
   - 出牌/过牌/质疑三选一
   - 15秒行动时间限制
   - 超时自动过牌

3. **回合结束条件**
   - 有玩家质疑（无论成功与否）
   - 除最后出牌者外所有人过牌

4. **新回合开始**
   - 收牌方或最后出牌方先出
   - 可以声明新的牌值

### 计分规则
1. **基础分数**
   - 第一名：+3分
   - 第二名：+2分
   - 第三名：+1分
   - 最后一名：-1分

2. **额外加分**
   - 成功质疑：+1分
   - 全程未说谎且获胜：+2分

3. **扣分情况**
   - 质疑失败：-1分
   - 违规行为：-2分
   - 中途退出：-3分

## 游戏功能

### 1. 登陆系统
- 快速登陆：使用昵称即可进入游戏
- 管理后台连接

### 2. 大厅系统
- 房间列表：实时更新的游戏房间列表
- 玩家列表：显示在线玩家状态（空闲、未准备、准备中、游戏中）
- 聊天系统：支持大厅公共聊天，大厅玩家可以看到其他玩家的聊天记录
- 创建房间：可自定义房间人数上限，最多支持6名玩家
- 快速返回：一键回到已经加入的房间
- 快速加入：一键随机加入房间

### 3. 房间功能
- 显示房间状态，出牌历史区域、玩家列表区域、机器人操作区域、排名区域、聊天记录区域，手牌区域、牌堆区、命令区域
- 玩家列表：显示房间内玩家状态（未准备、准备中、游戏中）
- 玩家功能
  - 玩家可以准备、取消准备、退出房间
  - 玩家可以进行出牌、过牌、质疑操作
- 机器人逻辑：AI玩家自动准备，非游戏状态的机器人房主可以删除。
- 房主功能：
  - 开始游戏（在所有玩家都准备后可以操作开始）
  - 踢出玩家
  - 管理机器人：添加、删除
  - 解散房间
  - 若房主退出，则房主自动转移给在房主后进入房间的第一个玩家，房主不能是机器人，若房间内只剩下机器人，则房间自动解散。
- 聊天系统：支持房间内聊天，玩家之间可看到其他玩家的聊天记录

### 4. 管理后台
- 房间管理：可以查看房间，可以解散房间，房间里的机器人自动销毁，玩家返回游戏大厅
- 玩家管理：可以查看玩家信息（包括玩家、机器人，包括在大厅、在房间、在房间准备、在游戏等状态）。可以把玩家踢出房间（回到大厅）、踢出游戏（退出账号）
- 管理日志：按照倒序顺序记录系统操作日志，包括玩家登录、房间创建、加入房间、退出房间、退出登录等

### 5. 游戏过程
 - 玩家登录游戏，创建房间，加入房间，房间人数满且所有玩家准备，房主开始游戏
 - 房主开始游戏需要选择游戏使用扑克牌副数（如1、2、3副），扑克牌自动洗牌平均分配给房间内玩家
 - 房主先手出牌，从手牌区选择X张牌，选中后出现操作选项，声明自己打出的是S1张T（比如3张K，和实际选中的可以一样可以不一样）。选择 出牌
 - 顺序玩家可以选择命令区的 过牌 ，即对出牌不质疑，自己不能出牌，顺序到下一玩家选择动作。
 - 顺序玩家可以选择命令区的 质疑 ，即对出牌质疑，则进入游戏判定，若出牌玩家出的牌实际和声明一致，则质疑玩家本轮输，底盘区域的牌全部归质疑玩家。如果出牌玩家出的牌实际和声明不一致，则被质疑玩家即出牌玩家本轮输，底盘区域的牌全部归被质疑玩家。非收回牌的玩家获得出牌权即进入下一轮。
 - 顺序玩家可以选择命令区的 出 ，但是只能声明自己打出的是S2张T（即没有判的情况下一直是一个点数的牌。除非其他人都过牌，则出牌权的玩家可以换点数出牌）。
 - 先出完牌的玩家，若此时有玩家质疑但失败、无人质疑，则本玩家优先胜出。出牌权的玩家顺位移到下一玩家。直到倒数第二个玩家胜出，则本局游戏结束。
 - 中途玩家退出，其手牌全部进入当前底牌区域。
 - 中途房主退出，则房主顺位给在其后先进入房间的玩家，房主不能是机器人，若房间内只剩下机器人，则房间自动解散。
